from typing import List, Optional

from openai import AsyncOpenAI
from pydantic import BaseModel
from rewire import config

from src.models import Aspect, Doctor, Service, Source


@config
class Config(BaseModel):
    api_key: str
    base_url: str


CLIENT = AsyncOpenAI(api_key=Config.api_key, base_url=Config.base_url)


async def generate_review_text(
        doctors: List[Doctor],
        services: List[Service],
        aspects: List[Aspect],
        source: Optional[Source]
) -> str:
    return '''–ï—Å–ª–∏ –±—ã –º–æ–∂–Ω–æ –±—ã–ª–æ –ø–æ—Å—Ç–∞–≤–∏—Ç—å 10 –∑–≤–µ–∑–¥, —è –±—ã –ø–æ—Å—Ç–∞–≤–∏–ª–∞.
–•–æ–¥–∏–ª–∞ —Å—é–¥–∞ —Å –¥–æ—á–µ—Ä—å—é 5,5 –ª–µ—Ç –Ω–∞ —É–¥–∞–ª–µ–Ω–∏–µ –º–æ–ª–æ—á–Ω–æ–≥–æ –∑—É–±–∞. –ö–∞–∑–∞–ª–æ—Å—å –±—ã, –Ω–µ—Å–ª–æ–∂–Ω–∞—è –ø—Ä–æ—Ü–µ–¥—É—Ä–∞. –ù–æ –¥–æ—á—å —Å—É–ø–µ—Ä –Ω–µ—Ä–≤–Ω–æ –∏ —Ç—Ä–µ–≤–æ–∂–Ω–æ –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ –ª—é–±—ã–º –ø—Ä–æ—Ü–µ–¥—É—Ä–∞–º, –∫–æ–≥–¥–∞ –µ–µ —Ç—Ä–æ–≥–∞—é—Ç –∏–ª–∏ –∫–∞–∫ —Ç–æ –¥–∞–∂–µ –Ω–µ–º–Ω–æ–≥–æ –¥–µ–ª–∞—é—Ç –Ω–µ–ø—Ä–∏—è—Ç–Ω–æ. –î–æ —Ç–∞–∫–æ–π —Å—Ç–µ–ø–µ–Ω–∏, —á—Ç–æ –º–æ–∂–µ—Ç –∑–∞–π—Ç–∏—Å—å –≤ –∏—Å—Ç–µ—Ä–∏–∫–∏ –∏ –∫—Ä–∏–∫–∞—Ö –≤–æ –≤—Ä–µ–º—è —Ç–æ–≥–æ, –∫–∞–∫ –µ–π –ø–∞–ª–æ—á–∫–æ–π –Ω–∞–Ω–æ—Å—è—Ç –æ–±–µ–∑–±–æ–ª–∏–≤–∞—é—â–∏–π –∫—Ä–µ–º ü§∑‚Äç‚ôÄÔ∏è
–ü—Ä–∏–µ–º –Ω–∞—á–∞–ª—Å—è —Å —Ç–æ–≥–æ, —á—Ç–æ –µ–π –º–∏–Ω—É—Ç 20 –ø—Ä–æ–≤–æ–¥–∏–ª–∏ —ç–∫—Å–∫—É—Ä—Å–∏—é –ø–æ –∫–ª–∏–Ω–∏–∫–µ, —Ä–∞—Å—Å–∫–∞–∑—ã–≤–∞—è –∏ –ø–æ–∫–∞–∑—ã–≤–∞—è –≤—Å–µ –æ–± –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞—Ö —Å—Ç–æ–º–∞—Ç–æ–ª–æ–≥–∞ –∏ –∑—É–±–∞—Ö (—è —É–∑–Ω–∞–ª–∞ –º–∏–ª–ª–∏–æ–Ω –≤—Å–µ–≥–æ –Ω–æ–≤–æ–≥–æ). –û–Ω–∞ —Å–∞–º–∞ –º–Ω–æ–≥–æ, —á—Ç–æ –ø–æ—Ç—Ä–æ–≥–∞–ª–∞ –∏ –ø–æ–Ω–∞–∂–∏–º–∞–ª–∞, –ø–æ–∑–Ω–∞–∫–æ–º–∏–≤—à–∏—Å—å —Å–æ –≤—Å–µ–º —à—É–º–Ω—ã–º –∏ ¬´—Å—Ç—Ä–∞—à–Ω—ã–º¬ª.
–í–æ –≤—Ä–µ–º—è –ø—Ä–æ—Ü–µ–¥—É—Ä—ã –µ–π –≤–∫–ª—é—á–∏–ª–∏ –º—É–ª—å—Ç–∏–∫, –≤—ã–∫–ª—é—á–∏–ª–∏ —Å–≤–µ—Ç –∏ —Å–¥–µ–ª–∞–ª–∏ –ø–æ–¥—Å–≤–µ—Ç–∫—É, –∫–∞–∫ –≤ –∫–∏–≤–æ—Å—Ç–∏. –†–∞–¥–∏ –Ω–∞—Å –≤—Å–µ –∑–∞–¥–µ—Ä–∂–∞–ª–∏—Å—å –Ω–∞ 40 –º–∏–Ω—É—Ç –ø–æ—Å–ª–µ –∑–∞–∫—Ä—ã—Ç–∏—è –∫–ª–∏–Ω–∏–∫–∏.
–í –∏—Ç–æ–≥–µ —Ä–µ–±–µ–Ω–æ–∫ —É—à–µ–ª —Å—á–∞—Å—Ç–ª–∏–≤—ã–π —Å –∫—É—á–µ–π –ø–æ–¥–∞—Ä–∫–æ–≤ –∏ –∑—É–±–æ–º –≤ –∫–æ—Ä–æ–±–æ—á–∫–µ.
–Ø –≤ –Ω–µ–≤–µ—Ä–æ—è—Ç–Ω–æ–º –≤–æ—Å—Ç–æ—Ä–≥–µ. –ë–æ–ª—å—à–µ –Ω–∏–∫—É–¥–∞ —è –¥–æ—á—å –≤–æ–¥–∏—Ç—å –Ω–µ –±—É–¥—É üòÖ'''
