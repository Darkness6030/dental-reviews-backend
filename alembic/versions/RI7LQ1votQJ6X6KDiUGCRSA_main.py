from alembic import op
from sqlalchemy.sql.schema import Column, ForeignKeyConstraint, MetaData, PrimaryKeyConstraint, Table
from sqlalchemy.sql.sqltypes import Boolean, DateTime, Integer
from sqlmodel.sql.sqltypes import AutoString

# revision identifiers, used by Alembic.
revision = 'RI7LQ1votQJ6X6KDiUGCRSA'
down_revision = 'root'
branch_labels = None
depends_on = None


def upgrade() -> None:
    # ### commands auto generated by rewire_sqlmodel - please adjust! ###
    op.create_table(
        'user',
        Column(
            'id',
            Integer(),
            primary_key=True,
            nullable=False,
        ),
        Column(
            'username',
            AutoString(),
            nullable=False,
        ),
        Column(
            'password_hash',
            AutoString(),
            nullable=False,
        ),
        Column(
            'is_admin',
            Boolean(),
            nullable=False,
        ),
        Column(
            'telegram_id',
            Integer(),
            nullable=True,
        ),
        PrimaryKeyConstraint(
            'id',
        ),
    )
    op.create_table(
        'doctor',
        Column(
            'id',
            Integer(),
            primary_key=True,
            nullable=False,
        ),
        Column(
            'name',
            AutoString(),
            nullable=False,
        ),
        Column(
            'role',
            AutoString(),
            nullable=False,
        ),
        Column(
            'avatar_url',
            AutoString(),
            nullable=True,
        ),
        PrimaryKeyConstraint(
            'id',
        ),
    )
    op.create_table(
        'service',
        Column(
            'id',
            Integer(),
            primary_key=True,
            nullable=False,
        ),
        Column(
            'name',
            AutoString(),
            nullable=False,
        ),
        PrimaryKeyConstraint(
            'id',
        ),
    )
    op.create_table(
        'aspect',
        Column(
            'id',
            Integer(),
            primary_key=True,
            nullable=False,
        ),
        Column(
            'name',
            AutoString(),
            nullable=False,
        ),
        PrimaryKeyConstraint(
            'id',
        ),
    )
    op.create_table(
        'source',
        Column(
            'id',
            Integer(),
            primary_key=True,
            nullable=False,
        ),
        Column(
            'name',
            AutoString(),
            nullable=False,
        ),
        PrimaryKeyConstraint(
            'id',
        ),
    )
    op.create_table(
        'reward',
        Column(
            'id',
            Integer(),
            primary_key=True,
            nullable=False,
        ),
        Column(
            'name',
            AutoString(),
            nullable=False,
        ),
        Column(
            'image_url',
            AutoString(),
            nullable=True,
        ),
        PrimaryKeyConstraint(
            'id',
        ),
    )
    op.create_table(
        'platform',
        Column(
            'id',
            Integer(),
            primary_key=True,
            nullable=False,
        ),
        Column(
            'name',
            AutoString(),
            nullable=False,
        ),
        Column(
            'image_url',
            AutoString(),
            nullable=False,
        ),
        PrimaryKeyConstraint(
            'id',
        ),
    )
    op.create_table(
        'reason',
        Column(
            'id',
            Integer(),
            primary_key=True,
            nullable=False,
        ),
        Column(
            'name',
            AutoString(),
            nullable=False,
        ),
        PrimaryKeyConstraint(
            'id',
        ),
    )
    op.create_table(
        'doctorservicelink',
        Column(
            'doctor_id',
            Integer(),
            primary_key=True,
            nullable=False,
        ),
        Column(
            'service_id',
            Integer(),
            primary_key=True,
            nullable=False,
        ),
        ForeignKeyConstraint(
            ['service_id'],
            [
                'service.id',
            ],
            name='fk_doctorservicelink_service_id_service',
        ),
        ForeignKeyConstraint(
            ['doctor_id'],
            [
                'doctor.id',
            ],
            name='fk_doctorservicelink_doctor_id_doctor',
        ),
        PrimaryKeyConstraint(
            'doctor_id',
            'service_id',
        ),
    )
    op.create_table(
        'review',
        Column(
            'id',
            Integer(),
            primary_key=True,
            nullable=False,
        ),
        Column(
            'created_at',
            DateTime(),
            nullable=False,
        ),
        Column(
            'contact_name',
            AutoString(),
            nullable=True,
        ),
        Column(
            'contact_phone',
            AutoString(),
            nullable=True,
        ),
        Column(
            'review_text',
            AutoString(),
            nullable=True,
        ),
        PrimaryKeyConstraint(
            'id',
        ),
    )
    op.create_table(
        'reviewaspectlink',
        Column(
            'review_id',
            Integer(),
            primary_key=True,
            nullable=False,
        ),
        Column(
            'aspect_id',
            Integer(),
            primary_key=True,
            nullable=False,
        ),
        PrimaryKeyConstraint(
            'review_id',
            'aspect_id',
        ),
        ForeignKeyConstraint(
            ['aspect_id'],
            [
                'aspect.id',
            ],
            name='fk_reviewaspectlink_aspect_id_aspect',
        ),
        ForeignKeyConstraint(
            ['review_id'],
            [
                'review.id',
            ],
            name='fk_reviewaspectlink_review_id_review',
        ),
    )
    op.create_table(
        'reviewdoctorlink',
        Column(
            'review_id',
            Integer(),
            primary_key=True,
            nullable=False,
        ),
        Column(
            'doctor_id',
            Integer(),
            primary_key=True,
            nullable=False,
        ),
        ForeignKeyConstraint(
            ['doctor_id'],
            [
                'doctor.id',
            ],
            name='fk_reviewdoctorlink_doctor_id_doctor',
        ),
        PrimaryKeyConstraint(
            'review_id',
            'doctor_id',
        ),
        ForeignKeyConstraint(
            ['review_id'],
            [
                'review.id',
            ],
            name='fk_reviewdoctorlink_review_id_review',
        ),
    )
    op.create_table(
        'reviewplatformlink',
        Column(
            'review_id',
            Integer(),
            primary_key=True,
            nullable=False,
        ),
        Column(
            'platform_id',
            Integer(),
            primary_key=True,
            nullable=False,
        ),
        PrimaryKeyConstraint(
            'review_id',
            'platform_id',
        ),
        ForeignKeyConstraint(
            ['review_id'],
            [
                'review.id',
            ],
            name='fk_reviewplatformlink_review_id_review',
        ),
        ForeignKeyConstraint(
            ['platform_id'],
            [
                'platform.id',
            ],
            name='fk_reviewplatformlink_platform_id_platform',
        ),
    )
    op.create_table(
        'reviewrewardlink',
        Column(
            'review_id',
            Integer(),
            primary_key=True,
            nullable=False,
        ),
        Column(
            'reward_id',
            Integer(),
            primary_key=True,
            nullable=False,
        ),
        ForeignKeyConstraint(
            ['reward_id'],
            [
                'reward.id',
            ],
            name='fk_reviewrewardlink_reward_id_reward',
        ),
        ForeignKeyConstraint(
            ['review_id'],
            [
                'review.id',
            ],
            name='fk_reviewrewardlink_review_id_review',
        ),
        PrimaryKeyConstraint(
            'review_id',
            'reward_id',
        ),
    )
    op.create_table(
        'reviewservicelink',
        Column(
            'review_id',
            Integer(),
            primary_key=True,
            nullable=False,
        ),
        Column(
            'service_id',
            Integer(),
            primary_key=True,
            nullable=False,
        ),
        ForeignKeyConstraint(
            ['review_id'],
            [
                'review.id',
            ],
            name='fk_reviewservicelink_review_id_review',
        ),
        PrimaryKeyConstraint(
            'review_id',
            'service_id',
        ),
        ForeignKeyConstraint(
            ['service_id'],
            [
                'service.id',
            ],
            name='fk_reviewservicelink_service_id_service',
        ),
    )
    op.create_table(
        'reviewsourcelink',
        Column(
            'review_id',
            Integer(),
            primary_key=True,
            nullable=False,
        ),
        Column(
            'source_id',
            Integer(),
            primary_key=True,
            nullable=False,
        ),
        ForeignKeyConstraint(
            ['source_id'],
            [
                'source.id',
            ],
            name='fk_reviewsourcelink_source_id_source',
        ),
        PrimaryKeyConstraint(
            'review_id',
            'source_id',
        ),
        ForeignKeyConstraint(
            ['review_id'],
            [
                'review.id',
            ],
            name='fk_reviewsourcelink_review_id_review',
        ),
    )
    op.create_table(
        'complaint',
        Column(
            'id',
            Integer(),
            primary_key=True,
            nullable=False,
        ),
        Column(
            'created_at',
            DateTime(),
            nullable=False,
        ),
        Column(
            'contact_name',
            AutoString(),
            nullable=True,
        ),
        Column(
            'contact_phone',
            AutoString(),
            nullable=True,
        ),
        Column(
            'complaint_text',
            AutoString(),
            nullable=True,
        ),
        PrimaryKeyConstraint(
            'id',
        ),
    )
    op.create_table(
        'complaintreasonlink',
        Column(
            'complaint_id',
            Integer(),
            primary_key=True,
            nullable=False,
        ),
        Column(
            'reason_id',
            Integer(),
            primary_key=True,
            nullable=False,
        ),
        ForeignKeyConstraint(
            ['reason_id'],
            [
                'reason.id',
            ],
            name='fk_complaintreasonlink_reason_id_reason',
        ),
        PrimaryKeyConstraint(
            'complaint_id',
            'reason_id',
        ),
        ForeignKeyConstraint(
            ['complaint_id'],
            [
                'complaint.id',
            ],
            name='fk_complaintreasonlink_complaint_id_complaint',
        ),
    )
    # ### end Alembic commands ###


def downgrade() -> None:
    # ### commands auto generated by rewire_sqlmodel - please adjust! ###
    op.drop_table('aspect')
    op.drop_table('complaint')
    op.drop_table('complaintreasonlink')
    op.drop_table('doctor')
    op.drop_table('doctorservicelink')
    op.drop_table('platform')
    op.drop_table('reason')
    op.drop_table('review')
    op.drop_table('reviewaspectlink')
    op.drop_table('reviewdoctorlink')
    op.drop_table('reviewplatformlink')
    op.drop_table('reviewrewardlink')
    op.drop_table('reviewservicelink')
    op.drop_table('reviewsourcelink')
    op.drop_table('reward')
    op.drop_table('service')
    op.drop_table('source')
    op.drop_table('user')
    # ### end Alembic commands ###


_Meta = MetaData()
schema = {
    'aspect': Table(
        'aspect',
        _Meta,
        Column(
            'id',
            Integer(),
            primary_key=True,
            nullable=False,
        ),
        Column(
            'name',
            AutoString(),
            nullable=False,
        ),
        PrimaryKeyConstraint(
            'id',
        ),
    ),
    'complaint': Table(
        'complaint',
        _Meta,
        Column(
            'id',
            Integer(),
            primary_key=True,
            nullable=False,
        ),
        Column(
            'created_at',
            DateTime(),
            nullable=False,
        ),
        Column(
            'contact_name',
            AutoString(),
            nullable=True,
        ),
        Column(
            'contact_phone',
            AutoString(),
            nullable=True,
        ),
        Column(
            'complaint_text',
            AutoString(),
            nullable=True,
        ),
        PrimaryKeyConstraint(
            'id',
        ),
    ),
    'doctor': Table(
        'doctor',
        _Meta,
        Column(
            'id',
            Integer(),
            primary_key=True,
            nullable=False,
        ),
        Column(
            'name',
            AutoString(),
            nullable=False,
        ),
        Column(
            'role',
            AutoString(),
            nullable=False,
        ),
        Column(
            'avatar_url',
            AutoString(),
            nullable=True,
        ),
        PrimaryKeyConstraint(
            'id',
        ),
    ),
    'platform': Table(
        'platform',
        _Meta,
        Column(
            'id',
            Integer(),
            primary_key=True,
            nullable=False,
        ),
        Column(
            'name',
            AutoString(),
            nullable=False,
        ),
        Column(
            'image_url',
            AutoString(),
            nullable=False,
        ),
        PrimaryKeyConstraint(
            'id',
        ),
    ),
    'reason': Table(
        'reason',
        _Meta,
        Column(
            'id',
            Integer(),
            primary_key=True,
            nullable=False,
        ),
        Column(
            'name',
            AutoString(),
            nullable=False,
        ),
        PrimaryKeyConstraint(
            'id',
        ),
    ),
    'review': Table(
        'review',
        _Meta,
        Column(
            'id',
            Integer(),
            primary_key=True,
            nullable=False,
        ),
        Column(
            'created_at',
            DateTime(),
            nullable=False,
        ),
        Column(
            'contact_name',
            AutoString(),
            nullable=True,
        ),
        Column(
            'contact_phone',
            AutoString(),
            nullable=True,
        ),
        Column(
            'review_text',
            AutoString(),
            nullable=True,
        ),
        PrimaryKeyConstraint(
            'id',
        ),
    ),
    'reward': Table(
        'reward',
        _Meta,
        Column(
            'id',
            Integer(),
            primary_key=True,
            nullable=False,
        ),
        Column(
            'name',
            AutoString(),
            nullable=False,
        ),
        Column(
            'image_url',
            AutoString(),
            nullable=True,
        ),
        PrimaryKeyConstraint(
            'id',
        ),
    ),
    'service': Table(
        'service',
        _Meta,
        Column(
            'id',
            Integer(),
            primary_key=True,
            nullable=False,
        ),
        Column(
            'name',
            AutoString(),
            nullable=False,
        ),
        PrimaryKeyConstraint(
            'id',
        ),
    ),
    'source': Table(
        'source',
        _Meta,
        Column(
            'id',
            Integer(),
            primary_key=True,
            nullable=False,
        ),
        Column(
            'name',
            AutoString(),
            nullable=False,
        ),
        PrimaryKeyConstraint(
            'id',
        ),
    ),
    'user': Table(
        'user',
        _Meta,
        Column(
            'id',
            Integer(),
            primary_key=True,
            nullable=False,
        ),
        Column(
            'username',
            AutoString(),
            nullable=False,
        ),
        Column(
            'password_hash',
            AutoString(),
            nullable=False,
        ),
        Column(
            'is_admin',
            Boolean(),
            nullable=False,
        ),
        Column(
            'telegram_id',
            Integer(),
            nullable=True,
        ),
        PrimaryKeyConstraint(
            'id',
        ),
    ),
    'complaintreasonlink': Table(
        'complaintreasonlink',
        _Meta,
        Column(
            'complaint_id',
            Integer(),
            primary_key=True,
            nullable=False,
        ),
        Column(
            'reason_id',
            Integer(),
            primary_key=True,
            nullable=False,
        ),
        ForeignKeyConstraint(
            ['reason_id'],
            [
                'reason.id',
            ],
            name='fk_complaintreasonlink_reason_id_reason',
        ),
        PrimaryKeyConstraint(
            'complaint_id',
            'reason_id',
        ),
        ForeignKeyConstraint(
            ['complaint_id'],
            [
                'complaint.id',
            ],
            name='fk_complaintreasonlink_complaint_id_complaint',
        ),
    ),
    'doctorservicelink': Table(
        'doctorservicelink',
        _Meta,
        Column(
            'doctor_id',
            Integer(),
            primary_key=True,
            nullable=False,
        ),
        Column(
            'service_id',
            Integer(),
            primary_key=True,
            nullable=False,
        ),
        ForeignKeyConstraint(
            ['doctor_id'],
            [
                'doctor.id',
            ],
            name='fk_doctorservicelink_doctor_id_doctor',
        ),
        PrimaryKeyConstraint(
            'doctor_id',
            'service_id',
        ),
        ForeignKeyConstraint(
            ['service_id'],
            [
                'service.id',
            ],
            name='fk_doctorservicelink_service_id_service',
        ),
    ),
    'reviewaspectlink': Table(
        'reviewaspectlink',
        _Meta,
        Column(
            'review_id',
            Integer(),
            primary_key=True,
            nullable=False,
        ),
        Column(
            'aspect_id',
            Integer(),
            primary_key=True,
            nullable=False,
        ),
        ForeignKeyConstraint(
            ['review_id'],
            [
                'review.id',
            ],
            name='fk_reviewaspectlink_review_id_review',
        ),
        PrimaryKeyConstraint(
            'review_id',
            'aspect_id',
        ),
        ForeignKeyConstraint(
            ['aspect_id'],
            [
                'aspect.id',
            ],
            name='fk_reviewaspectlink_aspect_id_aspect',
        ),
    ),
    'reviewdoctorlink': Table(
        'reviewdoctorlink',
        _Meta,
        Column(
            'review_id',
            Integer(),
            primary_key=True,
            nullable=False,
        ),
        Column(
            'doctor_id',
            Integer(),
            primary_key=True,
            nullable=False,
        ),
        ForeignKeyConstraint(
            ['review_id'],
            [
                'review.id',
            ],
            name='fk_reviewdoctorlink_review_id_review',
        ),
        ForeignKeyConstraint(
            ['doctor_id'],
            [
                'doctor.id',
            ],
            name='fk_reviewdoctorlink_doctor_id_doctor',
        ),
        PrimaryKeyConstraint(
            'review_id',
            'doctor_id',
        ),
    ),
    'reviewplatformlink': Table(
        'reviewplatformlink',
        _Meta,
        Column(
            'review_id',
            Integer(),
            primary_key=True,
            nullable=False,
        ),
        Column(
            'platform_id',
            Integer(),
            primary_key=True,
            nullable=False,
        ),
        ForeignKeyConstraint(
            ['platform_id'],
            [
                'platform.id',
            ],
            name='fk_reviewplatformlink_platform_id_platform',
        ),
        ForeignKeyConstraint(
            ['review_id'],
            [
                'review.id',
            ],
            name='fk_reviewplatformlink_review_id_review',
        ),
        PrimaryKeyConstraint(
            'review_id',
            'platform_id',
        ),
    ),
    'reviewrewardlink': Table(
        'reviewrewardlink',
        _Meta,
        Column(
            'review_id',
            Integer(),
            primary_key=True,
            nullable=False,
        ),
        Column(
            'reward_id',
            Integer(),
            primary_key=True,
            nullable=False,
        ),
        ForeignKeyConstraint(
            ['reward_id'],
            [
                'reward.id',
            ],
            name='fk_reviewrewardlink_reward_id_reward',
        ),
        ForeignKeyConstraint(
            ['review_id'],
            [
                'review.id',
            ],
            name='fk_reviewrewardlink_review_id_review',
        ),
        PrimaryKeyConstraint(
            'review_id',
            'reward_id',
        ),
    ),
    'reviewservicelink': Table(
        'reviewservicelink',
        _Meta,
        Column(
            'review_id',
            Integer(),
            primary_key=True,
            nullable=False,
        ),
        Column(
            'service_id',
            Integer(),
            primary_key=True,
            nullable=False,
        ),
        PrimaryKeyConstraint(
            'review_id',
            'service_id',
        ),
        ForeignKeyConstraint(
            ['service_id'],
            [
                'service.id',
            ],
            name='fk_reviewservicelink_service_id_service',
        ),
        ForeignKeyConstraint(
            ['review_id'],
            [
                'review.id',
            ],
            name='fk_reviewservicelink_review_id_review',
        ),
    ),
    'reviewsourcelink': Table(
        'reviewsourcelink',
        _Meta,
        Column(
            'review_id',
            Integer(),
            primary_key=True,
            nullable=False,
        ),
        Column(
            'source_id',
            Integer(),
            primary_key=True,
            nullable=False,
        ),
        PrimaryKeyConstraint(
            'review_id',
            'source_id',
        ),
        ForeignKeyConstraint(
            ['source_id'],
            [
                'source.id',
            ],
            name='fk_reviewsourcelink_source_id_source',
        ),
        ForeignKeyConstraint(
            ['review_id'],
            [
                'review.id',
            ],
            name='fk_reviewsourcelink_review_id_review',
        ),
    ),
}
